{% extends "base.html" %}
{% block title %}New Project â€” Splatpipe{% endblock %}

{% block content %}
<div class="flex items-center gap-4 mb-6">
    <a href="/" class="btn btn-ghost btn-sm">&larr; Back</a>
    <h1 class="text-3xl font-bold">New Project</h1>
</div>

{% if error %}
<div class="alert alert-error mb-6 shadow-lg">
    <span>{{ error }}</span>
</div>
{% endif %}

<form method="post" action="/projects/new">
    <div class="grid gap-6">

        <!-- Basic Info -->
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title">Project Info</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="form-control w-full">
                        <label class="label"><span class="label-text">Project Name</span></label>
                        <input type="text" name="name" value="{{ values.get('name', '') }}"
                               placeholder="My Scan"
                               class="input input-bordered w-full" required>
                    </div>
                    <div class="form-control w-full">
                        <label class="label"><span class="label-text">Source (Postshot file, COLMAP folder, etc.)</span></label>
                        <div class="join w-full">
                            <input type="text" name="colmap_dir" id="path-colmap_dir" value="{{ values.get('colmap_dir', '') }}"
                                   placeholder="H:\path\to\alignment\data"
                                   class="input input-bordered join-item w-full font-mono text-sm" required>
                            <button type="button" class="btn btn-outline join-item"
                                    onclick="openBrowser('path-colmap_dir', 'dir')">Folder</button>
                            <button type="button" class="btn btn-outline join-item"
                                    onclick="openBrowser('path-colmap_dir', 'file')">File</button>
                        </div>
                        <label class="label"><span class="label-text-alt">Postshot (.psht), COLMAP (.txt/.bin), Bundler, RealityScan, BlocksExchange</span></label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Submit -->
        <div class="flex justify-end">
            <button type="submit" class="btn btn-primary btn-wide">Create Project</button>
        </div>
    </div>
</form>

{% include "partials/browse_modal.html" %}
<script src="/static/browse.js"></script>
{% endblock %}
