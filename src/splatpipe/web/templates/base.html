<!DOCTYPE html>
<html data-theme="dark" lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Splatpipe{% endblock %}</title>
    <link rel="icon" type="image/png" href="/static/SplatPipe_Logo.png">
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.14/dist/full.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@2.0.4"></script>
    <script src="https://unpkg.com/htmx-ext-sse@2.2.2/sse.js"></script>
</head>
<body class="min-h-screen bg-base-200" hx-ext="sse">
    <div class="navbar bg-base-100 shadow-lg">
        <div class="flex-1">
            <a href="/" class="btn btn-ghost gap-2 text-xl">
                <img src="/static/SplatPipe_Logo.png" alt="Splatpipe" class="h-8 w-8">
                <span class="font-bold">Splatpipe</span>
            </a>
        </div>
        <div class="flex-none">
            <ul class="menu menu-horizontal px-1">
                <li><a href="/projects/" class="{% if request.url.path == '/' or request.url.path.startswith('/projects') %}active{% endif %}">Projects</a></li>
                <li><a href="/settings/" class="{% if request.url.path.startswith('/settings') %}active{% endif %}">Settings</a></li>
            </ul>
        </div>
    </div>

    <div class="container mx-auto px-4 py-8 max-w-6xl">
        {% block content %}{% endblock %}
    </div>

    <!-- Toast container -->
    <div id="toast-container" class="toast toast-end toast-top z-50"></div>

    <script>
    // Listen for HX-Trigger "showToast" events from HTMX responses
    document.body.addEventListener("showToast", function(evt) {
        var msg = evt.detail.message || "Done";
        var level = evt.detail.level || "success";
        var container = document.getElementById("toast-container");
        var alert = document.createElement("div");
        alert.className = "alert alert-" + level + " shadow-lg";
        alert.innerHTML = "<span>" + msg + "</span>";
        container.appendChild(alert);
        setTimeout(function() {
            alert.style.transition = "opacity 0.3s";
            alert.style.opacity = "0";
            setTimeout(function() { alert.remove(); }, 300);
        }, 3000);
    });
    </script>
</body>
</html>
