{% extends "base.html" %}
{% block title %}Projects â€” Splatpipe{% endblock %}

{% block content %}
<div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold">Projects</h1>
    <a href="/projects/new" class="btn btn-primary btn-sm">+ New Project</a>
</div>

{% if projects %}
<div class="grid gap-4">
    {% for project in projects %}
    <a href="/projects/{{ project.path }}/detail" class="card bg-base-100 shadow-xl hover:bg-base-300 transition-colors">
        <div class="card-body">
            <div class="flex justify-between items-center">
                <div>
                    <h2 class="card-title">{{ project.name }}</h2>
                    <p class="text-sm opacity-60">{{ project.trainer }} &middot; {{ project.lod_count }} LODs</p>
                </div>
                <div class="flex gap-2">
                    {% for step_name in ['clean', 'train', 'assemble', 'deploy'] %}
                        {% set step = project.steps.get(step_name) %}
                        {% if step and step.status == 'completed' %}
                            <div class="badge badge-success">{{ step_name }}</div>
                        {% elif step and step.status == 'failed' %}
                            <div class="badge badge-error">{{ step_name }}</div>
                        {% elif step and step.status == 'running' %}
                            <div class="badge badge-warning">{{ step_name }}</div>
                        {% else %}
                            <div class="badge badge-ghost">{{ step_name }}</div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </a>
    {% endfor %}
</div>
{% else %}
<div class="card bg-base-100 shadow-xl">
    <div class="card-body items-center text-center py-12">
        <h2 class="card-title text-2xl mb-2">No projects yet</h2>
        <p class="opacity-60 mb-4">Create your first project to get started.</p>
        <a href="/projects/new" class="btn btn-primary">+ New Project</a>
    </div>
</div>
{% endif %}
{% endblock %}
